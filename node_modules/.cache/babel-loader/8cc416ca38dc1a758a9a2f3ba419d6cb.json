{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.paramsNotation = paramsNotation;\nexports.encodeType = encodeType;\nexports.displayType = displayType;\nexports.withTypeString = withTypeString;\nexports.SPECIAL_TYPES = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _types = require(\"../../create/types\");\n\nvar _util = require(\"@polkadot/util\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2.default)(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nconst SPECIAL_TYPES = ['AccountId', 'AccountIndex', 'Address', 'Balance'];\nexports.SPECIAL_TYPES = SPECIAL_TYPES;\n\nconst identity = value => value;\n\nfunction paramsNotation(outer, inner, transform = identity) {\n  let arrayStr = '';\n\n  if (inner) {\n    arrayStr = '<' + (Array.isArray(inner) ? inner : [inner]).map(transform).join(', ') + '>';\n  }\n\n  return `${outer}${arrayStr}`;\n} // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\n\nfunction encodeWithParams(typeDef, outer = typeDef.displayName || typeDef.type) {\n  const {\n    info,\n    params,\n    sub\n  } = typeDef;\n\n  switch (info) {\n    case _types.TypeDefInfo.BTreeMap:\n    case _types.TypeDefInfo.BTreeSet:\n    case _types.TypeDefInfo.Compact:\n    case _types.TypeDefInfo.HashMap:\n    case _types.TypeDefInfo.Linkage:\n    case _types.TypeDefInfo.Option:\n    case _types.TypeDefInfo.Result:\n    case _types.TypeDefInfo.Vec:\n      return paramsNotation(outer, params || sub, // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      param => displayType(param));\n\n    default:\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n      return outer;\n  }\n}\n\nfunction encodeDoNotConstruct({\n  displayName\n}) {\n  // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n  return `DoNotEncode<${displayName}>`;\n}\n\nfunction encodeSubTypes(sub, asEnum) {\n  const inner = sub.reduce((result, type) => {\n    return _objectSpread(_objectSpread({}, result), {}, {\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      [type.name]: encodeType(type)\n    });\n  }, {});\n  return JSON.stringify(asEnum ? {\n    _enum: inner\n  } : inner);\n}\n\nfunction encodeEnum(typeDef) {\n  (0, _util.assert)(typeDef.sub && Array.isArray(typeDef.sub), 'Unable to encode Enum type');\n  const sub = typeDef.sub;\n  const isClikeEnum = sub.reduce((bool, {\n    type\n  }) => bool && type === 'Null', true);\n\n  if (isClikeEnum) {\n    return `[${sub // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n    .map(({\n      name\n    }) => `\"${name}\"`).join(', ')}]`;\n  }\n\n  return encodeSubTypes(sub, true);\n}\n\nfunction encodeStruct(typeDef) {\n  (0, _util.assert)(typeDef.sub && Array.isArray(typeDef.sub), 'Unable to encode Struct type');\n  const sub = typeDef.sub;\n  return encodeSubTypes(sub);\n}\n\nfunction encodeTuple(typeDef) {\n  (0, _util.assert)(typeDef.sub && Array.isArray(typeDef.sub), 'Unable to encode Tuple type');\n  const sub = typeDef.sub;\n  return `(${sub // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  .map(type => encodeType(type)).join(', ')})`;\n}\n\nfunction encodeUInt({\n  length\n}, type) {\n  (0, _util.assert)((0, _util.isNumber)(length), 'Unable to encode VecFixed type');\n  return `${type}<${length}>`;\n}\n\nfunction encodeVecFixed({\n  length,\n  sub\n}) {\n  (0, _util.assert)((0, _util.isNumber)(length) && !(0, _util.isUndefined)(sub), 'Unable to encode VecFixed type'); // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/restrict-template-expressions\n\n  return `[${sub.type};${length}]`;\n} // We setup a record here to ensure we have comprehensive coverage (any item not covered will result\n// in a compile-time error with the missing index)\n\n\nconst encoders = {\n  [_types.TypeDefInfo.BTreeMap]: typeDef => encodeWithParams(typeDef, 'BTreeMap'),\n  [_types.TypeDefInfo.BTreeSet]: typeDef => encodeWithParams(typeDef, 'BTreeSet'),\n  [_types.TypeDefInfo.Compact]: typeDef => encodeWithParams(typeDef, 'Compact'),\n  [_types.TypeDefInfo.DoNotConstruct]: typeDef => encodeDoNotConstruct(typeDef),\n  [_types.TypeDefInfo.Enum]: typeDef => encodeEnum(typeDef),\n  [_types.TypeDefInfo.HashMap]: typeDef => encodeWithParams(typeDef, 'HashMap'),\n  [_types.TypeDefInfo.Int]: typeDef => encodeUInt(typeDef, 'Int'),\n  [_types.TypeDefInfo.Linkage]: typeDef => encodeWithParams(typeDef, 'Linkage'),\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  [_types.TypeDefInfo.Null]: typeDef => 'Null',\n  [_types.TypeDefInfo.Option]: typeDef => encodeWithParams(typeDef, 'Option'),\n  [_types.TypeDefInfo.Plain]: typeDef => typeDef.displayName || typeDef.type,\n  [_types.TypeDefInfo.Result]: typeDef => encodeWithParams(typeDef, 'Result'),\n  [_types.TypeDefInfo.Set]: typeDef => typeDef.type,\n  [_types.TypeDefInfo.Struct]: typeDef => encodeStruct(typeDef),\n  [_types.TypeDefInfo.Tuple]: typeDef => encodeTuple(typeDef),\n  [_types.TypeDefInfo.UInt]: typeDef => encodeUInt(typeDef, 'UInt'),\n  [_types.TypeDefInfo.Vec]: typeDef => encodeWithParams(typeDef, 'Vec'),\n  [_types.TypeDefInfo.VecFixed]: typeDef => encodeVecFixed(typeDef)\n};\n\nfunction encodeType(typeDef) {\n  const encoder = encoders[typeDef.info];\n  (0, _util.assert)(encoder, `Cannot encode type: ${typeDef.toString()}`);\n  return encoder(typeDef);\n}\n\nfunction displayType(typeDef) {\n  if (typeDef.displayName) {\n    return encodeWithParams(typeDef);\n  }\n\n  switch (typeDef.info) {\n    case _types.TypeDefInfo.Struct:\n    case _types.TypeDefInfo.Enum:\n      return encodeWithParams(typeDef);\n\n    default:\n      return encodeType(typeDef);\n  }\n}\n\nfunction withTypeString(typeDef) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n  const type = SPECIAL_TYPES.includes(typeDef.displayName) ? typeDef.displayName : encodeType(typeDef);\n  return _objectSpread(_objectSpread({}, typeDef), {}, {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    type\n  });\n}","map":{"version":3,"sources":["/home/michiel/Downloads/polkabasics-main/node_modules/@polkadot/types/codec/utils/encodeTypes.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","paramsNotation","encodeType","displayType","withTypeString","SPECIAL_TYPES","_defineProperty2","_types","_util","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","default","getOwnPropertyDescriptors","defineProperties","identity","outer","inner","transform","arrayStr","Array","isArray","map","join","encodeWithParams","typeDef","displayName","type","info","params","sub","TypeDefInfo","BTreeMap","BTreeSet","Compact","HashMap","Linkage","Option","Result","Vec","param","encodeDoNotConstruct","encodeSubTypes","asEnum","reduce","result","name","JSON","stringify","_enum","encodeEnum","assert","isClikeEnum","bool","encodeStruct","encodeTuple","encodeUInt","isNumber","encodeVecFixed","isUndefined","encoders","DoNotConstruct","Enum","Int","Null","Plain","Set","Struct","Tuple","UInt","VecFixed","encoder","toString","includes"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.paramsNotation = paramsNotation;\nexports.encodeType = encodeType;\nexports.displayType = displayType;\nexports.withTypeString = withTypeString;\nexports.SPECIAL_TYPES = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _types = require(\"../../create/types\");\n\nvar _util = require(\"@polkadot/util\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nconst SPECIAL_TYPES = ['AccountId', 'AccountIndex', 'Address', 'Balance'];\nexports.SPECIAL_TYPES = SPECIAL_TYPES;\n\nconst identity = value => value;\n\nfunction paramsNotation(outer, inner, transform = identity) {\n  let arrayStr = '';\n\n  if (inner) {\n    arrayStr = '<' + (Array.isArray(inner) ? inner : [inner]).map(transform).join(', ') + '>';\n  }\n\n  return `${outer}${arrayStr}`;\n} // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\n\nfunction encodeWithParams(typeDef, outer = typeDef.displayName || typeDef.type) {\n  const {\n    info,\n    params,\n    sub\n  } = typeDef;\n\n  switch (info) {\n    case _types.TypeDefInfo.BTreeMap:\n    case _types.TypeDefInfo.BTreeSet:\n    case _types.TypeDefInfo.Compact:\n    case _types.TypeDefInfo.HashMap:\n    case _types.TypeDefInfo.Linkage:\n    case _types.TypeDefInfo.Option:\n    case _types.TypeDefInfo.Result:\n    case _types.TypeDefInfo.Vec:\n      return paramsNotation(outer, params || sub, // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      param => displayType(param));\n\n    default:\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n      return outer;\n  }\n}\n\nfunction encodeDoNotConstruct({\n  displayName\n}) {\n  // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n  return `DoNotEncode<${displayName}>`;\n}\n\nfunction encodeSubTypes(sub, asEnum) {\n  const inner = sub.reduce((result, type) => {\n    return _objectSpread(_objectSpread({}, result), {}, {\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      [type.name]: encodeType(type)\n    });\n  }, {});\n  return JSON.stringify(asEnum ? {\n    _enum: inner\n  } : inner);\n}\n\nfunction encodeEnum(typeDef) {\n  (0, _util.assert)(typeDef.sub && Array.isArray(typeDef.sub), 'Unable to encode Enum type');\n  const sub = typeDef.sub;\n  const isClikeEnum = sub.reduce((bool, {\n    type\n  }) => bool && type === 'Null', true);\n\n  if (isClikeEnum) {\n    return `[${sub // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n    .map(({\n      name\n    }) => `\"${name}\"`).join(', ')}]`;\n  }\n\n  return encodeSubTypes(sub, true);\n}\n\nfunction encodeStruct(typeDef) {\n  (0, _util.assert)(typeDef.sub && Array.isArray(typeDef.sub), 'Unable to encode Struct type');\n  const sub = typeDef.sub;\n  return encodeSubTypes(sub);\n}\n\nfunction encodeTuple(typeDef) {\n  (0, _util.assert)(typeDef.sub && Array.isArray(typeDef.sub), 'Unable to encode Tuple type');\n  const sub = typeDef.sub;\n  return `(${sub // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  .map(type => encodeType(type)).join(', ')})`;\n}\n\nfunction encodeUInt({\n  length\n}, type) {\n  (0, _util.assert)((0, _util.isNumber)(length), 'Unable to encode VecFixed type');\n  return `${type}<${length}>`;\n}\n\nfunction encodeVecFixed({\n  length,\n  sub\n}) {\n  (0, _util.assert)((0, _util.isNumber)(length) && !(0, _util.isUndefined)(sub), 'Unable to encode VecFixed type'); // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/restrict-template-expressions\n\n  return `[${sub.type};${length}]`;\n} // We setup a record here to ensure we have comprehensive coverage (any item not covered will result\n// in a compile-time error with the missing index)\n\n\nconst encoders = {\n  [_types.TypeDefInfo.BTreeMap]: typeDef => encodeWithParams(typeDef, 'BTreeMap'),\n  [_types.TypeDefInfo.BTreeSet]: typeDef => encodeWithParams(typeDef, 'BTreeSet'),\n  [_types.TypeDefInfo.Compact]: typeDef => encodeWithParams(typeDef, 'Compact'),\n  [_types.TypeDefInfo.DoNotConstruct]: typeDef => encodeDoNotConstruct(typeDef),\n  [_types.TypeDefInfo.Enum]: typeDef => encodeEnum(typeDef),\n  [_types.TypeDefInfo.HashMap]: typeDef => encodeWithParams(typeDef, 'HashMap'),\n  [_types.TypeDefInfo.Int]: typeDef => encodeUInt(typeDef, 'Int'),\n  [_types.TypeDefInfo.Linkage]: typeDef => encodeWithParams(typeDef, 'Linkage'),\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  [_types.TypeDefInfo.Null]: typeDef => 'Null',\n  [_types.TypeDefInfo.Option]: typeDef => encodeWithParams(typeDef, 'Option'),\n  [_types.TypeDefInfo.Plain]: typeDef => typeDef.displayName || typeDef.type,\n  [_types.TypeDefInfo.Result]: typeDef => encodeWithParams(typeDef, 'Result'),\n  [_types.TypeDefInfo.Set]: typeDef => typeDef.type,\n  [_types.TypeDefInfo.Struct]: typeDef => encodeStruct(typeDef),\n  [_types.TypeDefInfo.Tuple]: typeDef => encodeTuple(typeDef),\n  [_types.TypeDefInfo.UInt]: typeDef => encodeUInt(typeDef, 'UInt'),\n  [_types.TypeDefInfo.Vec]: typeDef => encodeWithParams(typeDef, 'Vec'),\n  [_types.TypeDefInfo.VecFixed]: typeDef => encodeVecFixed(typeDef)\n};\n\nfunction encodeType(typeDef) {\n  const encoder = encoders[typeDef.info];\n  (0, _util.assert)(encoder, `Cannot encode type: ${typeDef.toString()}`);\n  return encoder(typeDef);\n}\n\nfunction displayType(typeDef) {\n  if (typeDef.displayName) {\n    return encodeWithParams(typeDef);\n  }\n\n  switch (typeDef.info) {\n    case _types.TypeDefInfo.Struct:\n    case _types.TypeDefInfo.Enum:\n      return encodeWithParams(typeDef);\n\n    default:\n      return encodeType(typeDef);\n  }\n}\n\nfunction withTypeString(typeDef) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n  const type = SPECIAL_TYPES.includes(typeDef.displayName) ? typeDef.displayName : encodeType(typeDef);\n  return _objectSpread(_objectSpread({}, typeDef), {}, {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    type\n  });\n}"]},"metadata":{},"sourceType":"script"}